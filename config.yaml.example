# Version for config schema
version: 1.0

uptime_kuma_url: "https://uptime.iszland.com"
username: "<user>"
password: "<password>"  # Better: use API key (when available from UKC)

interval: 60
max_retries: 1

# Global agent behavior
agent:
  use_outputs_discard: true   # When true: adds [[outputs.discard]] to each drop-in
                              #             so Telegraf starts even with only execd
                              # When false: no dummy output â€” use when you have real outputs
                              #             elsewhere (e.g., InfluxDB, Prometheus)
  docker_image: "<docker-registry>/uptime-kuma-agent:latest" # Registry for the Docker image

  # Logging configuration
  logging:
    level: "info"                                         # debug, info, warn, error
    format: "text"                                        # text, json
    internal_log_directory: "/app-logs"                   # Internal directory for logs and Docker volume mounts
    host_log_directory: "/var/log/uptime-kuma-agent"      # Host directory for Docker volume mounts
    max_size: 10                                          # Max size in MB before rotation
    max_age: 30                                           # Max age in days
    max_backups: 5                                        # Max number of backup files
    compress: true                                        # Compress rotated files
    socketio_log_level: "warn"                            # Socket.IO client log level: debug, info, warn, error, off

# Global thresholds for metrics (can be overridden per-monitor)
global_thresholds:
  cpu: 90
  ram: 90
  disk: 85

# Group definitions, for which monitors will specify which to belong to
groups:
  - name: "${host_name} Monitors"
    description: "System metrics for host ${host_name}"
    notification_names:
      - "Outlook Notification"

# Push monitor definitions
push_monitors:

  # CPU - usage_user from cpu input
  - name: "CPU %"
    group: "${host_name} Monitors"
    threshold: 90
    metric: cpu
    field: usage_user

  # RAM - used_percent from mem input
  - name: "RAM %"
    group: "${host_name} Monitors"
    threshold: 90
    metric: mem
    field: used_percent

  # Root Disk - disk input, filter by filesystem path
  - name: "Root Disk %"
    group: "${host_name} Monitors"
    threshold: 85
    metric: disk
    field: used_percent
    filesystem: "/"

  # Data Disk - custom mount point
  - name: "Data Disk %"
    group: "${host_name} Monitors"
    threshold: 85
    metric: disk
    field: used_percent
    filesystem: "/mnt/data/uptime-kuma-test"

  # Docker CPU
  - name: "Docker CPU %"
    group: "${host_name} Monitors"
    threshold: 90
    metric: docker_container_cpu
    field: usage_percent
    container_name: "uptime-kuma-test"

  # Docker Mem
  - name: "Docker Mem %"
    group: "${host_name} Monitors"
    threshold: 90
    metric: docker_container_mem
    field: usage_percent
    container_name: "uptime-kuma-test"

# HTTP monitor definitions
http_monitors:

  # Simple web service health check
  - name: "${host_name} Web"
    url: "http://<local-service>/health"
